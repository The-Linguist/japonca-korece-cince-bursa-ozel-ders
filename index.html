<html lang="tr" dir="ltr">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="icon" href="logo.png" type="image/png" sizes="512x512">
    <title>JAPONCA - Bursa Özel Ders</title>
    <meta name="description" content="bursa japonca kursu, japonca dil kursu, japonca özel ders">
    <link rel="stylesheet" href="ilk_ekran.css">

    <script>
      if ("serviceWorker" in navigator) {  window.addEventListener("DOMContentLoaded",()=>{  navigator.serviceWorker.register("service-worker.js");  });  }
    </script>

    <!-- Google tag (gtag.js) GOOGLE ADS -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-11021503070"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'AW-11021503070');
    </script>

    <!-- Event snippet for Giden tıklama conversion page
    In your html page, add the snippet and call gtag_report_conversion when someone clicks on the chosen link or button. -->
    <script>
    function gtag_report_conversion() {
      gtag('event', 'conversion', {
          'send_to': 'AW-11021503070/JlE2CIuCg4IYEN6Uu4cp'
      });
      return false;
    }
    </script>


  </head>
  <body>
    <iframe src=""></iframe>
    <main>
      <div class="dropShadow">
        <img src="beykagan_hoca.webp">
      </div>
      <div class="mesajIcerenDiv dropShadow">
        <p>Beykağan Hoca Bursa'da her seviye için yüzyüze Japonca (日本語) dersleri veriyor; daha fazla bilgi almak ve eğer istersen ders talebi oluşturmak için</p>
        <div class="" style="text-align:center;">
          <button class="button-30" role="button">TANITIM VİDEOSU İZLE</button>
          <!-- <button style="text-align:center; font-size: 11px; padding-left: 1ch; padding-right: 1ch;" role="button" disabled>Korece<br>한국어</button>&nbsp;&nbsp;&nbsp;&nbsp; -->
          <!-- <button style="text-align:center; font-size: 11px; padding-left: 1ch; padding-right: 1ch;" role="button" disabled>Çince<br>華語</button> -->
        </div>
      </div>
    </main>
    <script type="text/javascript">
      const main = document.getElementsByTagName('main')[0];
      const freym = document.getElementsByTagName('iframe')[0];
      //var geriSayim;
      var zamanDoldu30s = false;
      var zamanDoldu15s = false;
      window.addEventListener("load",startBgLoop);
      function startBgLoop() {
        async function loadFiles () {
          const myCache1 = await caches.open('my-cache-1');
          const myCache2 = await caches.open('my-cache-2');
          const firstGroup = ['bg/1.webp', 'bg/2.webp','bg/3.webp','bg/4.webp','bg/5.webp','bg/6.webp','bg/7.webp','bg/8.webp'];
          const secondGroup = ['hitoca_poster.jpg', 'hitoca.mp4'];
          try {
            await myCache1.addAll(firstGroup);
          } catch(err) {
            console.error(err);
          } finally {
            console.log("cache1 done");
            setTimeout(function () {  main.style.animationName = "changeBg";  }, 1000);
            await myCache2.addAll(secondGroup);
            console.log("cache2 as well");
            if (zamanDoldu30s) {
              console.log("It took more than 28s to cache the video\nNavigate immediately");
              console.log(freym.src);
              if (freym.src != "japonca.html") {
                console.log("...and the button still was not used");
                goToVideo();
              }
            } else if (zamanDoldu15s) {
              console.log("It took more than 15s to cache the video\nWill wait 15s before navigating");
              setTimeout(function () {
                console.log(freym.src);
                if (freym.src != "japonca.html") {
                  console.log("...and the button still was not used");
                  goToVideo();
                }
              }, 15000);
            } else {
              console.log("video loaded quickly in less than 15s\nWill wait 25s before navigating");
              setTimeout(function () {
                console.log(freym.src);
                if (freym.src != "japonca.html") {
                  console.log("...and the button still was not used");
                  goToVideo();
                }
              }, 25000);
            }
          }
        }
        loadFiles();

        function goToVideo() {
          console.log("going to video page due to timeout");
          freym.src = "japonca.html";
          setTimeout(function () {
            main.style.display = "none";
          }, 500);
          gtag_report_conversion(); // Madem ki video cache'ye yazılacak kadar beklemiş, bunu da dönüşüm sayalım
        }
        // After 30 seconds go to video even if button is not clicked
        setTimeout(function () {
          zamanDoldu30s=true;
        }, 28000);
        setTimeout(function () {
          zamanDoldu15s=true;
        }, 13000);
      }


      const secimJaponca = document.getElementsByTagName('button')[0];
      // const secimKorece = document.getElementsByTagName('button')[1];
      // const secimCince = document.getElementsByTagName('button')[2];
      secimJaponca.addEventListener("mouseup",hitocaHtmlYukle);
      function hitocaHtmlYukle() {
        console.log("going to video page because button was pressed");
        freym.src = "japonca.html";
        setTimeout(function () {
          main.style.display = "none";
        }, 500);
        gtag_report_conversion();
        // if (geriSayim) {          clearTimeout(geriSayim);        }
      }
      /*
      secimKorece.addEventListener("mouseup",koreceHtmlYukle);
      function koreceHtmlYukle() {
        gtag_report_conversion();
        freym.src = "korece.html";
        setTimeout(function () {
          main.style.display = "none";
        }, 500);
      }
      */
    </script>
  </body>
</html>
